 <html>
 
  <body>

    {{!-- <div class="barraRoja" style="background-color: white; width: 100%; height: 120px;">
        <img height="60px" src="https://i.postimg.cc/ZnjV8rNs/Artboard-1.png" alt="">
    </div> --}}

    <p class="text-justify my-12 mx-12 text-lg md:text-x6 md:py-8 lg:py-16"><strong> IMPORTANTE: </strong> Este portal es un directorio privado de propiedades que se encuentra protegido por la Ley de Secretos Empresariales de España (Ley 1/2019, de 20 de febrero).
    El acceso a este portal se otorga exclusivamente por invitación. Es importante tener en cuenta que las credenciales de acceso vencen cada 15 días, por lo tanto, el usuario debe solicitar la renovación 
    a la persona que le proporcionó el acceso si desea seguir utilizándolo. Debido a que las propiedades mostradas en este directorio provienen de fondos de reestructuración bancaria, la información proporcionada puede contener errores tanto en su descripción como en el precio. Por esta razón, la información contenida en este portal no tiene carácter vinculante.</p>

    
  <div class="container mx-auto py-8 bg-red-600 rounded">
  <form id="filtros" action="/filtrar" method="POST" class="filtro w-full lg:w-1/2 mx-auto flex flex-wrap lg:flex-nowrap space-y-4 lg:space-x-4 items-center">
    <div class="flex flex-col w-full items-start mb-3 lg:flex lg:items-start m-7">
      <label for="provincia" class="text-white w-full lg:w-2/5" style="line-height: 2;"><strong>Provincia</strong></label>
      <select id="provincia" name="provincia" class="provincia w-full lg:w-5/4 px-2 py-1 mt-2 border border-gray-300 rounded">
        <option value="">Seleccionar</option>
        <!-- Agrega las opciones de las provincias aquí -->
        <option value="Álava">Álava</option>
        <option value="Albacete">Albacete</option>
        <option value="Alicante">Alicante</option>
        <option value="Almería">Almería</option>
        <option value="Asturias">Asturias</option>
        <option value="Ávila">Ávila</option>
        <option value="Badajoz">Badajoz</option>
        <option value="Barcelona">Barcelona</option>
        <option value="Burgos">Burgos</option>
        <option value="Cáceres">Cáceres</option>
        <option value="Cádiz">Cádiz</option>
        <option value="Cantabria">Cantabria</option>
        <option value="Castellón">Castellón</option>
        <option value="Ciudad Real">Ciudad Real</option>
        <option value="Córdoba">Córdoba</option>
        <option value="Cuenca">Cuenca</option>
        <option value="Gerona">Gerona</option>
        <option value="Granada">Granada</option>
        <option value="Guadalajara">Guadalajara</option>
        <option value="Guipúzcoa">Guipúzcoa</option>
        <option value="Huelva">Huelva</option>
        <option value="Huesca">Huesca</option>
        <option value="Jaén">Jaén</option>
        <option value="La Coruña">La Coruña</option>
        <option value="La Rioja">La Rioja</option>
        <option value="Las Palmas">Las Palmas</option>
        <option value="León">León</option>
        <option value="Lérida">Lérida</option>
        <option value="Lugo">Lugo</option>
        <option value="Madrid">Madrid</option>
        <option value="Málaga">Málaga</option>
        <option value="Murcia">Murcia</option>
        <option value="Navarra">Navarra</option>
        <option value="Orense">Orense</option>
        <option value="Palencia">Palencia</option>
        <option value="Pontevedra">Pontevedra</option>
        <option value="Salamanca">Salamanca</option>
        <option value="Santa Cruz de Tenerife">Santa Cruz de Tenerife</option>
        <option value="Segovia">Segovia</option>
        <option value="Sevilla">Sevilla</option>
        <option value="Soria">Soria</option>
        <option value="Tarragona">Tarragona</option>
        <option value="Teruel">Teruel</option>
        <option value="Valencia">Valencia</option>
        <option value="Valladolid">Valladolid</option>
        <option value="Vizcaya">Vizcaya</option>
        <option value="Zamora">Zamora</option>
        <option value="Zaragoza">Zaragoza</option>
        <!-- ... -->
      </select>
    </div>
    <div class="flex flex-col w-full items-start mb-6 lg:flex lg:items-start m-7">
      <label for="ciudad" class="selectCiudad text-white w-full lg:w-2/5 py-1 mb-2" style="line-height: -3.5px;"><strong>Ciudad</strong></label>
      <select id="ciudad" name="ciudad" class="ciudad w-full lg:w-5/4 px-2 py-1 mt-0 border border-gray-300 rounded">
        <option value="">Seleccionar</option>
        <option value="Adeje">Adeje</option>
        <option value="Albacete">Albacete</option>
        <option value="Alcalá de Guadaíra">Alcalá de Guadaíra</option>
        <option value="Alcalá la Real">Alcalá la Real</option>
        <option value="Alcoy">Alcoy</option>
        <option value="Alcobendas">Alcobendas</option>
        <option value="Alhaurín de la Torre">Alhaurín de la Torre</option>
        <option value="Alicante">Alicante</option>
        <option value="Almería">Almería</option>
        <option value="Almuñécar">Almuñécar</option>
        <option value="Andújar">Andújar</option>
        <option value="Aranjuez">Aranjuez</option>
        <option value="Asturias">Asturias</option>
        <option value="Álava">Álava</option>
        <option value="Ávila">Ávila</option>
        <option value="Badajoz">Badajoz</option>
        <option value="Baena">Baena</option>
        <option value="Baeza">Baeza</option>
        <option value="Barcelona">Barcelona</option>
        <option value="Baza">Baza</option>
        <option value="Benidorm">Benidorm</option>
        <option value="Blanes">Blanes</option>
        <option value="Burgos">Burgos</option>
        <option value="Cáceres">Cáceres</option>
        <option value="Cádiz">Cádiz</option>
        <option value="Calvià">Calvià</option>
        <option value="Cantabria">Cantabria</option>
        <option value="Castellón">Castellón</option>
        <option value="Chiclana de la Frontera">Chiclana de la Frontera</option>
        <option value="Ciudad Real">Ciudad Real</option>
        <option value="Coín">Coín</option>
        <option value="Córdoba">Córdoba</option>
        <option value="Cuenca">Cuenca</option>
        <option value="Écija">Écija</option>
        <option value="Elda">Elda</option>
        <option value="El Puerto de Santa María">El Puerto de Santa María</option>
        <option value="Figueres">Figueres</option>
        <option value="Formentera">Formentera</option>
        <option value="Fuengirola">Fuengirola</option>
        <option value="Fuerteventura">Fuerteventura</option>
        <option value="Gerona">Gerona</option>
        <option value="Granada">Granada</option>
        <option value="Guadalajara">Guadalajara</option>
        <option value="Guipúzcoa">Guipúzcoa</option>
        <option value="Huelva">Huelva</option>
        <option value="Huesca">Huesca</option>
        <option value="Ibiza">Ibiza</option>
        <option value="Jaén">Jaén</option>
        <option value="Jerez de los Caballeros">Jerez de los Caballeros</option>
        <option value="La Coruña">La Coruña</option>
        <option value="La Gomera">La Gomera</option>
        <option value="La Graciosa">La Graciosa</option>
        <option value="La Línea de la Concepción">La Línea de la Concepción</option>
        <option value="La Palma">La Palma</option>
        <option value="La Rioja">La Rioja</option>
        <option value="Lanzarote">Lanzarote</option>
        <option value="Las Palmas">Las Palmas</option>
        <option value="Lebrija">Lebrija</option>
        <option value="León">León</option>
        <option value="Linares">Linares</option>
        <option value="Loja">Loja</option>
        <option value="Lugo">Lugo</option>
        <option value="Lérida">Lérida</option>
        <option value="Madrid">Madrid</option>
        <option value="Mahón">Mahón</option>
        <option value="Manresa">Manresa</option>
        <option value="Martorell">Martorell</option>
        <option value="Martos">Martos</option>
        <option value="Mataró">Mataró</option>
        <option value="Menorca">Menorca</option>
        <option value="Mijas">Mijas</option>
        <option value="Motril">Motril</option>
        <option value="Murcia">Murcia</option>
        <option value="Málaga">Málaga</option>
        <option value="Mérida">Mérida</option>
        <option value="Navarra">Navarra</option>
        <option value="Nerja">Nerja</option>
        <option value="Ourense">Ourense</option>
        <option value="Oviedo">Oviedo</option>
        <option value="Palencia">Palencia</option>
        <option value="Pamplona">Pamplona</option>
        <option value="Parla">Parla</option>
        <option value="Pontevedra">Pontevedra</option>
        <option value="Puertollano">Puertollano</option>
        <option value="Reus">Reus</option>
        <option value="Ronda">Ronda</option>
        <option value="Rota">Rota</option>
        <option value="Sabadell">Sabadell</option>
        <option value="Salamanca">Salamanca</option>
        <option value="San Fernando">San Fernando</option>
        <option value="San Sebastián">San Sebastián</option>
        <option value="Santa Cruz de Tenerife">Santa Cruz de Tenerife</option>
        <option value="Santander">Santander</option>
        <option value="Segovia">Segovia</option>
        <option value="Sevilla">Sevilla</option>
        <option value="Soria">Soria</option>
        <option value="Tarragona">Tarragona</option>
        <option value="Telde">Telde</option>
        <option value="Teruel">Teruel</option>
        <option value="Toledo">Toledo</option>
        <option value="Torremolinos">Torremolinos</option>
        <option value="Torrevieja">Torrevieja</option>
        <option value="Tudela">Tudela</option>
        <option value="Ubeda">Ubeda</option>
        <option value="Valencia">Valencia</option>
        <option value="Valladolid">Valladolid</option>
        <option value="Vigo">Vigo</option>
        <option value="Vitoria">Vitoria</option>
        <option value="Xàtiva">Xàtiva</option>
        <option value="Zamora">Zamora</option>
        <option value="Zaragoza">Zaragoza</option>
        <option value="Éibar">Éibar</option>
        <option value="Úbeda">Úbeda</option>
        <option value="Úrgel">Úrgel</option>
      </select>
       
  
    </div>
    <div class="flex flex-col w-full items-start mb-4 lg:flex lg:items-start m-7">
      <label for="referencia" class="text-white w-full lg:w-2/5 py-3" style="line-height: -3.2;"><strong>Referencia</strong></label>
      <input type="text" id="referencia" name="referencia" class="referencia w-full h-8 lg:w-4/4 px-2 py-2 mb-3 border border-gray-300 rounded">
    </div>
    {{!-- <div class="flex flex-col w-full items-start mb-4 lg:flex lg:items-start m-7">
      <label for="precioMinimo" class="text-white w-full lg:w-2/3 py-3" style="line-height: -2.1;"><strong>Precio Mín</strong></label>
      <select id="precioMinimo" name="precioMinimo" class="pMinimo w-full lg:w-5/4 px-2 py-1 mb-3 border border-gray-300 rounded">
        <option value="">Selecciona un precio mínimo</option>
        <option value="0">0 €</option>
        <option value="50000">50.000 €</option>
        <option value="100000">100.000 €</option>
        <option value="150000">150.000 €</option>
        <option value="200000">200.000 €</option>
        <option value="250000">250.000 €</option>
        <option value="300000">300.000 €</option>
        <option value="350000">350.000 €</option>
        <option value="400000">400.000 €</option>
        <option value="450000">450.000 €</option>
        <option value="500000">500.000 €</option>
        <option value="550000">550.000 €</option>
        <!-- Agrega más opciones de precio mínimo aquí -->
      </select>
    </div> --}}
    <div class="flex flex-col w-full items-start mb-4 lg:flex lg:items-start m-7">
      <label for="precioMaximo" class="text-white md:w-3/1 w-3/1 lg:w-4/4 py-3" style="line-height: -2.1;"><strong>Precio Máximo</strong></label>
      <select id="precioMaximo" name="precioMaximo" class="pMaximo w-full lg:w-4/4 px-2 py-1 mb-3 border border-gray-300 rounded">
        <option value="">Selecciona un precio máximo</option>
        <option value="0" >0 €</option>
        <option value="50000" >50.000 €</option>
        <option value="100000">100.000 €</option>
        <option value="150000">150.000 €</option>
        <option value="200000">200.000 €</option>
        <option value="250000">250.000 €</option>
        <option value="300000">300.000 €</option>
        <option value="400000">400.000 €</option>
        <option value="500000">500.000 €</option>
        <option value="600000">600.000 €</option>
        <option value="700000">700.000 €</option>
        <option value="800000">800.000 €</option>
        <option value="900000">900.000 €</option>
        <option value="1000000">1.000.000 €</option>
        <option value="1200000">1.200.000 €</option>
        <option value="1500000">1.500.000 €</option>
        <option value="2000000">2.000.000 €</option>
        <!-- Agrega más opciones de precio máximo aquí -->
      </select>
    </div>
     <div class="flex flex-col w-full items-start md:w-2/4  mb-4 lg:flex lg:items-start m-7">
      <label for="busqueda" class="text-white md:w-3/1 w-3/1 lg:w-4/4 py-3" style="line-height: -3.2;"><strong>Busqueda Rapida</strong></label>
      <input type="text" id="busqueda" name="busqueda" class="busqueda  h-8 px-2 py-2 mb-3 border border-gray-300 rounded ">

    </div>

    <button type="submit" class="self-center text-white nav-link font-semibold border-2 border-white hover:bg-white hover:text-green-700 py-2 px-8 rounded-md m-7">Filtrar</button>
  </form>
</div>

{{!-- {{#if provincia}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-0 m-10 ml-13 sm:text-base">Total de propiedades en {{provincia}}: <span class="text-green-600">{{totalPropiedadesFiltradas}}</span></h1>
{{else}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-5 m-10 ml-13 sm:text-base">Total de propiedades: <span class="text-green-600">{{totalPropiedades}}</span></h1>
{{/if}} --}}

{{!-- {{#if_or provincia ciudad referencia precioMinimo precioMaximo}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-0 m-10 ml-13 sm:text-base">Total de propiedades filtradas: <span class="text-green-600">{{totalPropiedadesFiltradas}}</span></h1>
{{else}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-5 m-10 ml-13 sm:text-base">Total de propiedades: <span class="text-green-600">{{totalPropiedades}}</span></h1>
{{/if_or}} --}}

{{#if provincia}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-0 m-10 ml-13 sm:text-base">Total de propiedades en {{provincia}}
    {{#if precioMinimo}} con precio mínimo {{precioMinimo}}{{/if}}
    {{#if precioMaximo}} con precio máximo {{precioMaximo}}{{/if}}
    : <span class="text-green-600">{{totalPropiedadesFiltradas}}</span></h1>
{{/if}}
{{#if busqueda}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-0 m-10 ml-13 sm:text-base">Total de propiedades {{busqueda}}
    : <span class="text-green-600">{{propiedadesFiltradasBusqueda}}</span></h1>
{{/if}}

{{#if ciudad}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-0 m-10 ml-13 sm:text-base">Total de propiedades en {{ciudad}}
    {{#if precioMinimo}} con precio mínimo {{precioMinimo}}{{/if}}
    {{#if precioMaximo}} con precio máximo {{precioMaximo}}{{/if}}
    : <span class="text-green-600">{{totalPropiedadesFiltradas}}</span></h1>
{{/if}}
{{#if referencia}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-0 m-10 ml-13 sm:text-base">Total de propiedades con referencia {{referencia}}
    {{#if precioMinimo}} con precio mínimo {{precioMinimo}}{{/if}}
    {{#if precioMaximo}} con precio máximo {{precioMaximo}}{{/if}}
    : <span class="text-green-600">{{totalPropiedadesFiltradas}}</span></h1>
{{/if}}

{{#if_or provincia ciudad referencia precioMinimo precioMaximo busqueda}}
{{else}}
  <h1 class="custom-text text-3x2 font-semibold text-gray-700 mt-4 lg:mt-5 m-10 ml-13 sm:text-base">Total de propiedades: <span class="text-green-600">{{totalPropiedades}}</span></h1>
{{/if_or}}




    <div class="cards">
      {{#each data}}

      <div class="card">
        <a href="/detalle/{{this.Id}}">
          <img src="{{this.MainPhoto}}" alt="" class="card-image">
          <div class="card-details">
            <h1><strong>{{this.Title}}</strong></h1>
            <p data-referencia><strong>Referencia:</strong> {{this.Id}}</p>
            <p data-provincia><strong>Provincia:</strong> {{this.Provincia}}</p>
            <p data-municipio><strong>Ciudad:</strong> {{this.Municipio}}</p>
            <p><strong>Precio:</strong> {{this.Price}}</p>
            <p><strong>Superficie:</strong> {{this.MetrosCuadrados}} m2</p>
            <p><strong>Dormitorios:</strong> {{this.Dormitorios}}</p>
            <p><strong>Baños:</strong> {{this.Baños}}</p>
          </div>
        </a>
      </div>

      {{/each}}
    </div>




<!-- Resto del contenido de home.hbs -->

<div class="flex items-center justify-center flex-wrap">
  <nav aria-label="Pagination">
    {{#each pages}}
      <a href="/?page={{this}}" class="mx-1 my-0 px-3 py-0 border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50{{#if_eq this ../current_page}} bg-gray-200{{/if_eq}}">
        {{this}}
      </a>
    {{/each}}
  </nav>
</div>


<script>
// Obtener todos los elementos de filtro
const filtros = document.querySelectorAll('select');

// Agregar un event listener a cada elemento de filtro
filtros.forEach(filtro => {
  filtro.addEventListener('change', (event) => {
    // Obtener el valor seleccionado
    const valorSeleccionado = event.target.value;
    
    // Obtener el nombre del filtro
    const nombreFiltro = event.target.name;
    
    // Almacenar el valor seleccionado en localStorage
    localStorage.setItem(nombreFiltro, valorSeleccionado);
  });
});

document.addEventListener('DOMContentLoaded', () => {
  // Obtener todos los elementos de filtro
  const filtros = document.querySelectorAll('select');

  // Establecer el valor seleccionado para cada filtro basado en el valor almacenado
  filtros.forEach(filtro => {
    // Obtener el nombre del filtro
    const nombreFiltro = filtro.name;
    
    // Obtener el valor almacenado del localStorage
    const valorSeleccionado = localStorage.getItem(nombreFiltro);
    
    // Establecer el valor seleccionado para el filtro
    if (valorSeleccionado) {
      filtro.value = valorSeleccionado;
    }
  });
});

function resetSelects() {
  // Eliminar los valores almacenados en el localStorage
  localStorage.removeItem('nombreDelFiltro1');
  localStorage.removeItem('nombreDelFiltro2');
  // Agrega más líneas para cada filtro que quieras resetear

  // Restablecer los valores seleccionados en los selects
  filtros.forEach(filtro => {
    filtro.value = '';
  });
}

// Event listener para el logout
const logoutBtn = document.getElementById('logoutBtn');
logoutBtn.addEventListener('click', () => {
  resetSelects();
});


</script>


  </body>
</html>

<style>

  .filtro{
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;

  }

  .pMinimo{
    width: 150px;
  }
  .pMaximo{
    width: 150px;
  }
  .provincia{
    width: 180px;
 
  }
  .ciudad{
    width: 180px;
  }


  .busqueda {
    width: 200px;;
  }



  .custom-text {
  font-size: 24px; /* Ajusta el tamaño de la fuente aquí */
  margin-left: 70px; /* Ajusta el margen izquierdo aquí */
  margin-top: 20px;
 
}
  body {
    font-family: Montserrat, sans-serif;
    background-color: white;
    margin: 0;
    padding: 0;
  }

  .barraRoja{
    margin-bottom: 80px;
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;

  }
  
  .cards {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    padding: 0px;
  }
  
  .card {
    background-color: white;
    border-radius: 6px;
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.1);
    margin: 20px;
    max-width: 100%;
    overflow: hidden;
    transition: 0.3s;
    width: 100%;
  }
  
  .card:hover {
    box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
  }
  
  .card-image {
    width: 100%;
    height: auto;
  }
  
  .card-details {
    padding: 25px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: start;
  }
  
  .card-details h4 {
    margin: 0;
    font-size: 14px;
    margin-bottom: 10px;
    
  }
  
  .card-details p {
    margin: 0;
    margin-top: 10px;
    color: black;
  }
  
  /* Media queries para diferentes tamaños de pantalla */
  @media screen and (min-width: 40em) {
    .card {
      flex: 0 1 calc(100% - 1em);
      max-width: calc(50% - 1em);
    }
    .busqueda{
      width: 250px;
    }
  }
  
  @media screen and (min-width: 70em) {
    .card {
      flex: 0 1 calc(25% - 1em);
      max-width: calc(25% - 1em);
    }
    .busqueda{
      width: 250px;
    }
  
  }

  /* Media queries para diferentes tamaños de pantalla */
@media screen and (max-width: 640px) {
 

  .busqueda {
    width: 320px;
  }
  .provincia {
    width: 320px;
  }
  .ciudad {
    width: 320px;
  }
  .pMinimo {
    width: 320px;
  }
  .pMaximo {
    width: 320px;
  }
}

@media screen and (min-width: 1120px) {
 
  .busqueda {
    width: 180px;
  }
}

  
</style>